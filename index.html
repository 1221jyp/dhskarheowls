<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>2025 배구 리그</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .score-box {
        border: 1px solid #ccc;
        border-radius: 8px;
        min-height: 150px;
        text-align: center;
        background-color: #f8f9fa;
        margin-bottom: 1rem;
        padding: 0.5rem;
      }
    </style>
  </head>
  <body class="p-0" onload="showGrade(1)">
    <header class="text-white p-3" style="background-color: #000">
      <div
        class="container d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center"
      >
        <h1 class="h4 m-0">2025 오남고 배구 런치리그</h1>
      </div>
    </header>

    <div class="container mt-4">
      <div class="mt-2" id="gradeSelection">
        <div class="btn-group w-100 d-flex flex-wrap gap-2 mb-4" role="group">
          <button class="btn btn-outline-secondary flex-fill" onclick="showGrade(1)">1학년</button>
          <button class="btn btn-outline-secondary flex-fill" onclick="showGrade(2)">2학년</button>
          <button class="btn btn-outline-secondary flex-fill" onclick="showGrade(3)">3학년</button>
        </div>
      </div>

      <!-- HTML 출력 영역 -->
      <div class="row mb-4" id="gradeContent">
        <!-- JS로 학년별 조별 승점 정보 자동 삽입 -->
      </div>
    </div>

    <script>
      let scoreData = {};

      const gradeGroupMap = {
        1: [
          "1학년-남자부-A조",
          "1학년-남자부-B조",
          "1학년-남자부-C조",
          "1학년-여자부-A조",
          "1학년-여자부-B조",
          "1학년-여자부-C조",
        ],
        2: [
          "2학년-남자부-A조",
          "2학년-남자부-B조",
          "2학년-남자부-C조",
          "2학년-여자부-A조",
          "2학년-여자부-B조",
          "2학년-여자부-C조",
        ],
        3: ["3학년-남자부-A조", "3학년-남자부-B조", "3학년-여자부-A조", "3학년-여자부-B조"],
      };

      function createScoreBox(groupName, data) {
        const sorted = Object.entries(data).sort((a, b) => {
          const A = a[1],
            B = b[1];
          return B.승점 - A.승점 || B.총점 - A.총점 || B.승 - A.승;
        });

        const rows = sorted
          .map((entry, idx) => {
            const [team, stats] = entry;
            return `
      <div class="row">
        <div class="col">${idx + 1}위</div>
        <div class="col">${team}</div>
        <div class="col">${stats.승}</div>
        <div class="col">${stats.패}</div>
        <div class="col">${stats.승점}</div>
        <div class="col">${stats.총점}</div>
      </div>`;
          })
          .join("");

        return `
    <div class="col-12 col-md-4">
      <div class="score-box">
        <h3 class="mb-1 border-bottom mb-2">${groupName}</h3>
        <div class="row fw-bold border-bottom mb-1 pb-1">
          <div class="col">순위</div>
          <div class="col">반</div>
          <div class="col">승</div>
          <div class="col">패</div>
          <div class="col">승점</div>
          <div class="col">총득</div>
        </div>
        ${rows}
      </div>
    </div>`;
      }

      function showGrade(grade) {
        const container = document.getElementById("gradeContent");
        const groups = gradeGroupMap[grade];
        const html = groups.map((group) => createScoreBox(group, scoreData[group])).join("");
        container.innerHTML = html;
      }

      fetch("전처리_결과.json")
        .then((res) => res.json())
        .then((json) => {
          scoreData = json;
          showGrade(1); // 초기 화면 1학년
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
